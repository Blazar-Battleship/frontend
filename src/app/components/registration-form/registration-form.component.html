<div class="page-container">

  <div class="headings">
    <h1>Ready to set sails?</h1>
    <h2 *ngIf="list.length < 2">Who will command the fleets?</h2>
    <h4 *ngIf="list.length < 2">Just six brave souls would be enough</h4>
    <h2 *ngIf="list.length >= 2">Confirm the crew?</h2>
    <h4 *ngIf="list.length >= 2">Up to 6 fleet Commanders</h4>
  </div>

  <form [formGroup]="registrationForm" novalidate (submit)="addToList()">
    <mat-form-field *ngIf="list.length < 6">
      <mat-label>Username (letters only)</mat-label>
      <input
        matInput
        formControlName="playerToAdd"
        [readonly]="list.length >= 6"
        (input)="checkInputLength()"
      />
      <mat-error
        *ngIf="
          registrationForm.get('playerToAdd')?.hasError('required') ||
          registrationForm.get('playerToAdd')?.hasError('maxlength') ||
          registrationForm.get('playerToAdd')?.hasError('exists')
        "
      >
        <ng-container
          *ngIf="registrationForm.get('playerToAdd')?.hasError('required')"
        >
          Username is required
        </ng-container>

        <ng-container
          *ngIf="registrationForm.get('playerToAdd')?.hasError('maxlength')"
        >
          max 20 characters
        </ng-container>
        <ng-container
          *ngIf="registrationForm.get('playerToAdd')?.hasError('exists')"
        >
          Username already exists
        </ng-container>
      </mat-error>
      <mat-error
        *ngIf="registrationForm.get('playerToAdd')?.hasError('pattern')"
      >
        A letter is required
      </mat-error>
    </mat-form-field>

    <div *ngIf="list.length < 6">
      <button
        mat-raised-button
        color="primary"
        type="button"
        [disabled]="
          registrationForm.invalid ||
          !registrationForm.get('playerToAdd')?.value ||
          registrationForm.get('playerToAdd')?.hasError('pattern') ||
          registrationForm.get('playerToAdd')?.hasError('maxlength') ||
          registrationForm.get('playerToAdd')?.hasError('exists') ||
          disableAddButton
        "
        (click)="addToList(); registrationForm.get('playerToAdd')?.reset()"
      >
        Add player
      </button>
    </div>
  </form>
<div class="player-list">
  <ul>
    <li *ngFor="let player of list">
      {{ player }}
      <button
        mat-icon-button
        color="warn"
        (click)="removeFromList(list.indexOf(player))"
      >
        <mat-icon>clear</mat-icon>
      </button>
    </li>
    <div *ngIf="list.length >= 2 && list.length <= 6">
      <button
        mat-raised-button
        color="primary"
        type="button"
        class="confirm"
        (click)="confirmPlayers()"
        [disabled]="list.length < 2"
      >
        Confirm players
      </button>
    </div>
  </ul>
</div>
</div>
